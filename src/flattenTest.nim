import flatten
import operatorApprox

assert flatten(3) == @[3]
assert flatten("foo") == @["foo"]
assert flatten(@[2, 3, 4]) == @[2, 3, 4]
assert flatten(@[@[@[1.2, 3.4]]]) == @[1.2, 3.4]
assert flatten(@[@[1.2, 3.4], @[5.6, 7.8, 9.10]]) == @[1.2, 3.4, 5.6, 7.8, 9.10]

let x = @[@[@[@[-1.0627854628924365, -0.21045422795289, -2.9437545406926184,
    -1.5020163346147708, 0.05892396378180292], @[-0.5354212085117948,
    -0.11533066154673123, -1.869623215265102, -1.0202377938276483,
    -1.0425379391768514], @[0.9731881349997613, -0.07299759017597103,
    0.494701668465838, 1.1198860473304946, -1.0330709390089723], @[
    2.2586084300907348, 0.4771445527161897, 1.8793598358450916,
    0.6422475028656611, -0.19780980317261165]], @[@[2.299722397494673,
    0.3843910371583937, 0.22476634616234611, 0.48573747724933325,
    0.7535156551460657], @[-0.14483309257633128, -0.04516596270581268,
    -1.1864417852647278, 1.522793043313622, -0.2542130024688414], @[
    -0.6724308205507774, 0.1410947699368787, 0.5027203346222059,
    -0.4749243162990384, -1.1458808258231405], @[-0.7901142637975264,
    -0.012387171097970369, -0.4537236043231966, 0.31937180560566897,
    0.6526447031849121]], @[@[-0.3732130399899666, -0.4116614699079608,
    -1.5164746976942192, 0.059955646484998994, -1.300776383205713], @[
    0.8781972845903981, -0.12959037058211537, 1.7963613427558607,
    -0.7580182209059583, 0.7487246356345852], @[-0.00010783516428674282,
    1.37047743169648, -0.6222053508435412, 0.9236334389320052,
    -1.0840867404240697], @[1.8759467329693034, -0.4344914169645979,
    -0.1856128098756499, 0.38527757355208825, 2.2514639520085318]]], @[@[@[
    0.5160750698272745, -0.32964609395059835, -0.43961065666723753,
    0.19768656674510696, -1.1006016435993438], @[-0.5341191290419226,
    0.3483440564495584, -0.7048777501677437, -1.6504313060310982,
    0.16601982861675846], @[1.0323554978797014, 0.07123981103138274,
    0.22282768692421626, 1.0154287748777653, -0.3593752181550927], @[
    -0.008321268308650147, 1.2841021854860053, -1.2263211392443465,
    -0.8696987628335928, 0.9046809485515761]], @[@[1.7107984687660729,
    -0.95871849226461, 0.6067823955831869, -1.0965098241938307,
    -1.9417157664866354], @[0.18383618115895448, -0.8015293169151506,
    0.3230096446243665, -0.3626937327544838, 0.060825796689721844], @[
    1.7883334768507892, -0.4307543298183536, 1.0165944637802435,
    -1.6119151315871096, 1.2032226152472072], @[1.9147548166012096,
    -0.3731849995534565, 0.7436068304983856, -0.6043523074091376,
    -1.1966251935640886]], @[@[-1.4618100994377217, -0.7031386655690949,
    1.587285648275025, -0.9460388966408738, 0.9617567012745796], @[
    1.4767755731872214, 1.0242882832491589, 1.7593593976305664,
    -0.8262257636917907, -0.45515945467246194], @[-0.8475704126021494,
    -0.9862384277614504, 0.25969544536487316, -1.169552317080026,
    -0.15748149943619247], @[-0.765952034010248, 0.8152325193301523,
    -0.6321038727892806, 1.2940748918012068, -0.4854065726340923]]]]

let yTrue = @[-1.0627854628924365, -0.21045422795289, -2.9437545406926184,
    -1.5020163346147708, 0.05892396378180292, -0.5354212085117948,
    -0.11533066154673123, -1.869623215265102, -1.0202377938276483,
    -1.0425379391768514, 0.9731881349997613, -0.07299759017597103,
    0.494701668465838, 1.1198860473304946, -1.0330709390089723,
    2.2586084300907348, 0.4771445527161897, 1.8793598358450916,
    0.6422475028656611, -0.19780980317261165, 2.299722397494673,
    0.3843910371583937, 0.22476634616234611, 0.48573747724933325,
    0.7535156551460657, -0.14483309257633128, -0.04516596270581268,
    -1.1864417852647278, 1.522793043313622, -0.2542130024688414,
    -0.6724308205507774, 0.1410947699368787, 0.5027203346222059,
    -0.4749243162990384, -1.1458808258231405, -0.7901142637975264,
    -0.012387171097970369, -0.4537236043231966, 0.31937180560566897,
    0.6526447031849121, -0.3732130399899666, -0.4116614699079608,
    -1.5164746976942192, 0.059955646484998994, -1.300776383205713,
    0.8781972845903981, -0.12959037058211537, 1.7963613427558607,
    -0.7580182209059583, 0.7487246356345852, -0.00010783516428674282,
    1.37047743169648, -0.6222053508435412, 0.9236334389320052,
    -1.0840867404240697, 1.8759467329693034, -0.4344914169645979,
    -0.1856128098756499, 0.38527757355208825, 2.2514639520085318,
    0.5160750698272745, -0.32964609395059835, -0.43961065666723753,
    0.19768656674510696, -1.1006016435993438, -0.5341191290419226,
    0.3483440564495584, -0.7048777501677437, -1.6504313060310982,
    0.16601982861675846, 1.0323554978797014, 0.07123981103138274,
    0.22282768692421626, 1.0154287748777653, -0.3593752181550927,
    -0.008321268308650147, 1.2841021854860053, -1.2263211392443465,
    -0.8696987628335928, 0.9046809485515761, 1.7107984687660729,
    -0.95871849226461, 0.6067823955831869, -1.0965098241938307,
    -1.9417157664866354, 0.18383618115895448, -0.8015293169151506,
    0.3230096446243665, -0.3626937327544838, 0.060825796689721844,
    1.7883334768507892, -0.4307543298183536, 1.0165944637802435,
    -1.6119151315871096, 1.2032226152472072, 1.9147548166012096,
    -0.3731849995534565, 0.7436068304983856, -0.6043523074091376,
    -1.1966251935640886, -1.4618100994377217, -0.7031386655690949,
    1.587285648275025, -0.9460388966408738, 0.9617567012745796,
    1.4767755731872214, 1.0242882832491589, 1.7593593976305664,
    -0.8262257636917907, -0.45515945467246194, -0.8475704126021494,
    -0.9862384277614504, 0.25969544536487316, -1.169552317080026,
    -0.15748149943619247, -0.765952034010248, 0.8152325193301523,
    -0.6321038727892806, 1.2940748918012068, -0.4854065726340923]

let yPred = flatten(x)
assert yPred ~ yTrue
