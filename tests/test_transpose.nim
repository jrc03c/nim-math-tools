import nim_math_tools/operator_approx
import nim_math_tools/transpose
import std/unittest

test "transpose":
  check transpose(@[@[2, 3], @[4, 5]]) == @[@[2, 4], @[3, 5]]

  let x = @[@[-0.6055308322294359, -0.6251372259505296, -1.099862606080935,
      -0.7619768541269072, -0.4336845915041762], @[0.060718651335801795,
      -1.1331453699974732, -1.0373966292979173, 2.292318276353412,
      0.5695797827437493], @[0.9909420426702026, -2.0864061715237385,
      0.06937354859902738, 0.25472128773727654, -2.165035134650262], @[
      -0.03749681208477969, -0.130859820045925, -0.8805266343536412,
      0.46208720839147144, 1.3680700550966354], @[0.25527930543362026,
      0.9708122155561301, -0.6534569108510193, -1.0220357143901957,
      0.47803832129091706]]

  let xt = @[@[-0.6055308322294359, 0.060718651335801795, 0.9909420426702026,
      -0.03749681208477969, 0.25527930543362026], @[-0.6251372259505296,
      -1.1331453699974732, -2.0864061715237385, -0.130859820045925,
      0.9708122155561301], @[-1.099862606080935, -1.0373966292979173,
      0.06937354859902738, -0.8805266343536412, -0.6534569108510193], @[
      -0.7619768541269072, 2.292318276353412, 0.25472128773727654,
      0.46208720839147144, -1.0220357143901957], @[-0.4336845915041762,
      0.5695797827437493, -2.165035134650262, 1.3680700550966354,
      0.47803832129091706]]

  check transpose(x) ~ xt
